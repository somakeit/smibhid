<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>SMIBHID - Environmental Sensors</title>
        <link rel="stylesheet" href="../css/style.css">
        <link rel="stylesheet" href="../css/sensors.css">
        <script src="../js/common.js?v=1.0.0"></script>
        <script src="../js/sensors.js?v=1.0.0"></script>
    </head>
    
    <body data-subtitle="Environmental Sensors Management" data-footer-context="Environmental Sensors">
        <div class="container">
            <div id="header-placeholder"></div>

            <!-- Main content area -->
            <main class="main-content">
                <!-- Welcome section -->
                <section class="welcome-section">
                    <h2>Environmental Monitoring</h2>
                    <p class="description">
                        SMIBHID supports multiple environmental sensors for comprehensive monitoring. 
                        Manage and configure your attached sensors using the controls below.
                    </p>
                    <div id="sensor-status" class="sensor-status">
                        <span class="status-indicator">üîÑ</span>
                        <span id="status-text">Loading sensor information...</span>
                    </div>
                </section>

                <!-- Sensor management grid -->
                <div class="admin-grid" id="sensor-grid">
                    <!-- BME280 Sensor Panel -->
                    <div class="admin-panel sensor-panel" id="bme280-panel" style="display: none;">
                        <div class="panel-icon">üå°Ô∏è</div>
                        <h3>BME280 Sensor</h3>
                        <p>Precision temperature, humidity, and barometric pressure sensor for environmental monitoring.</p>
                        <div class="sensor-details">
                            <ul>
                                <li><strong>Temperature:</strong> ¬±1.0¬∞C accuracy</li>
                                <li><strong>Humidity:</strong> ¬±3% RH accuracy</li>
                                <li><strong>Pressure:</strong> ¬±1 hPa accuracy</li>
                            </ul>
                        </div>
                        <a href="#" class="panel-button" onclick="event.preventDefault(); viewSensorData('BME280', event)">View Readings</a>
                    </div>

                    <!-- SGP30 Sensor Panel -->
                    <div class="admin-panel sensor-panel" id="sgp30-panel" style="display: none;">
                        <div class="panel-icon">üí®</div>
                        <h3>SGP30 Sensor</h3>
                        <p>Multi-pixel gas sensor for indoor air quality monitoring including TVOC and eCO2.</p>
                        <div class="sensor-details">
                            <ul>
                                <li><strong>TVOC:</strong> 0-60,000 ppb range</li>
                                <li><strong>eCO2:</strong> 400-60,000 ppm range</li>
                                <li><strong>Response:</strong> <10 seconds</li>
                            </ul>
                        </div>
                        <a href="#" class="panel-button" onclick="event.preventDefault(); viewSensorData('SGP30', event)">View Readings</a>
                    </div>

                    <!-- SCD30 Sensor Panel -->
                    <div class="admin-panel sensor-panel" id="scd30-panel" style="display: none;">
                        <div class="panel-icon">ü´Å</div>
                        <h3>SCD30 Sensor</h3>
                        <p>High-precision CO2, temperature, and humidity sensor with NDIR technology.</p>
                        <div class="sensor-details">
                            <ul>
                                <li><strong>CO2:</strong> ¬±30 ppm accuracy</li>
                                <li><strong>Temperature:</strong> ¬±0.4¬∞C accuracy</li>
                                <li><strong>Humidity:</strong> ¬±2% RH accuracy</li>
                            </ul>
                        </div>
                        <div class="sensor-actions">
                            <a href="#" class="panel-button" onclick="event.preventDefault(); viewSensorData('SCD30', event)">View Readings</a>
                            <a href="/sensors/scd30" class="panel-button secondary">Manage SCD30</a>
                        </div>
                    </div>

                    <!-- Alarm Status Panel -->
                    <div class="admin-panel" id="alarm-panel">
                        <div class="panel-icon" id="alarm-icon">üîî</div>
                        <h3>CO2 Alarm Status</h3>
                        <p>Monitor and manage CO2 alarm settings and current status.</p>
                        <div id="alarm-details" class="sensor-details">
                            <div id="alarm-status-text">Loading alarm information...</div>
                        </div>
                        <div class="sensor-actions">
                            <a href="#" class="panel-button" onclick="event.preventDefault(); refreshAlarmStatus()">Refresh Status</a>
                            <a href="#" class="panel-button snooze-button" onclick="event.preventDefault(); snoozeAlarm(this)">Snooze Alarm</a>
                        </div>
                    </div>
                </div>

                <!-- Live Data Section -->
                <section class="live-data-section" id="live-data" style="display: none;">
                    <h2>Live Sensor Readings</h2>
                    
                    <!-- SCD30 Sensor Group -->
                    <div class="sensor-group" id="scd30-readings" style="display: none;">
                        <h3>SCD30 Sensor</h3>
                        <div class="data-grid">
                            <div class="data-card" id="scd30-temperature-card">
                                <h4>Temperature</h4>
                                <div class="data-value" id="scd30-temperature-value">--¬∞C</div>
                            </div>
                            <div class="data-card" id="scd30-humidity-card">
                                <h4>Humidity</h4>
                                <div class="data-value" id="scd30-humidity-value">--%</div>
                            </div>
                            <div class="data-card" id="scd30-co2-card">
                                <h4>CO2</h4>
                                <div class="data-value" id="scd30-co2-value">-- ppm</div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- BME280 Sensor Group -->
                    <div class="sensor-group" id="bme280-readings" style="display: none;">
                        <h3>BME280 Sensor</h3>
                        <div class="data-grid">
                            <div class="data-card" id="bme280-temperature-card">
                                <h4>Temperature</h4>
                                <div class="data-value" id="bme280-temperature-value">--¬∞C</div>
                            </div>
                            <div class="data-card" id="bme280-humidity-card">
                                <h4>Humidity</h4>
                                <div class="data-value" id="bme280-humidity-value">--%</div>
                            </div>
                            <div class="data-card" id="bme280-pressure-card">
                                <h4>Pressure</h4>
                                <div class="data-value" id="bme280-pressure-value">-- hPa</div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- SGP30 Sensor Group -->
                    <div class="sensor-group" id="sgp30-readings" style="display: none;">
                        <h3>SGP30 Sensor</h3>
                        <div class="data-grid">
                            <div class="data-card" id="sgp30-tvoc-card">
                                <h4>TVOC</h4>
                                <div class="data-value" id="sgp30-tvoc-value">-- ppb</div>
                            </div>
                            <div class="data-card" id="sgp30-eco2-card">
                                <h4>eCO2</h4>
                                <div class="data-value" id="sgp30-eco2-value">-- ppm</div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="live-data-controls">
                        <button class="panel-button" onclick="toggleLiveData()">Stop Live Updates</button>
                    </div>
                </section>

                <!-- Navigation -->
                <div class="navigation-section">
                    <a href="/" class="nav-link">‚Üê Back to Dashboard</a>
                    <a href="/api" class="nav-link">API Documentation ‚Üí</a>
                </div>
            </main>

            <div id="footer-placeholder"></div>
        </div>
    </body>
</html>